Zepto(function(e){function t(){var t=s.transaction("demo_service","readwrite"),r=t.objectStore("demo_service");r.get(a).onsuccess=function(t){n=t.target.result,n&&(e(".f_title003").text(n.title),e(".f_title004").text(n.desc))}}function r(){if(c.validate()&&l.validate()){o.createTime=(new Date).Format("yyyy-MM-dd hh:mm:ss"),o.service=n,o.userId=i.userId,o.name=c.val(),o.phone=l.val();var t=s.transaction("demo_order","readwrite"),r=t.objectStore("demo_order");r.put(o).onsuccess=function(){e("#order").hide(),e("#success").show(),e("#service_title").text(n.title),e("#service_desc").text(n.desc)}}}var i=getLoginUserInfo(),n="",o={};if(!i)return void(window.location.href="login.html");var a=parseInt(getUrlParam("serviceId")),s={};openIndexedDB(function(e){s=e,t()});var c={_el:e("#name"),validate:function(){var e=this.val();return e?!0:(showError(this._el,"姓名不能为空！"),!1)},val:function(e){return e?this._el.val(e):this._el.val()}},l={_el:e("#phone"),validate:function(){var e=this.val();return e?/1[3|4|5|7|8][0-9](\d|\*){4}\d{4}/.test(this._el.val())?!0:(showError(this._el,"手机号格式不正确！"),!1):(showError(this._el,"手机号不能为空！"),!1)},val:function(e){return e?this._el.val(e):this._el.val()}};e("#save").tap(function(){r()}),e("#back_index").tap(function(){window.location.href="index.html"}),e("#check_order").tap(function(){window.location.href="myOrders.html"})});